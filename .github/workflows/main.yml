name: main
on: [push, pull_request]
jobs:
  setup:
    runs-on: ubuntu-latest
    steps:
      - name: Install shellspec
        run: curl -fsSL https://git.io/shellspec | sudo sh -s -- -p /usr/local -y
  build:
    runs-on: ubuntu-latest
    needs: setup
    steps:
      - uses: actions/checkout@v1
      - name: Run do
        run: ./tools/do
  test:
    runs-on: ubuntu-latest
    needs: build
    steps:
      - uses: actions/checkout@v1
      - run: ./tools/do test
      - run: shellspec
